---
const { question, answer, variant } = Astro.props;
---

<div class="accordion_item" data-variant={variant}>
  <div class="accordion_header">{question}<img class="arrow" src="img/arrow.svg" alt="arrow icon" /></div>
  <div class="accordion_content">
    <p>{answer}</p>
  </div>
</div>

<style>
  /* Accordion header - styling */
  .accordion_header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-family: var(--font_body);
    font-size: 1rem;
    color: var(--primary_50);
    border-bottom: 2px solid var(--primary_50);
    padding: var(--spacing_3);
  }

  /* Content - vises ikke */
  .accordion_content {
    display: none;
    padding: var(--spacing_3);
  }

  /* Pil styling og rotering */
  .arrow {
    width: 10%;
    transition: transform 0.3s ease;
  }

  .rotate {
    transform: rotate(180deg);
  }

  @media (min-width: 800px) {
    .accordion_header {
      width: 504px;
    }
    .arrow {
      width: 5%;
    }
  }

  [data-variant="fullwidth"] .accordion_header {
    width: 100%;
  }
</style>

<script>
  // Find alle accordion-elementer
  const accordionItems = document.querySelectorAll(".accordion_item");

  // Tilføj klikhåndterer til hver accordion-item
  accordionItems.forEach((item) => {
    const header = item.querySelector(".accordion_header");
    const arrow = item.querySelector(".arrow");

    header.addEventListener("click", () => {
      // Skjul alle accordion-indholdselementer
      accordionItems.forEach((accItem) => {
        const content = accItem.querySelector(".accordion_content") as HTMLElement;
        if (accItem !== item) {
          content.style.display = "none";
          accItem.querySelector(".arrow")?.classList.remove("rotate"); // Fjern rotation på andre pile
        }
      });

      // Skift visning af det aktuelle accordion-indhold
      const content = item.querySelector(".accordion_content") as HTMLElement;
      content.style.display = content.style.display === "block" ? "none" : "block";

      // Roter pilikonet
      arrow.classList.toggle("rotate");
    });
  });
</script>
